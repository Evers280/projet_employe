{% extends 'entreprise/base.html' %}
{% block main_content_classes %}mt-2 mb-2 w-3xl{% endblock %}

{% block content %}
{% if entreprise_existe %}
<h2 class="text-2xl  w-max-3xl font-bold mb-4">Liste des services pour {{ entreprise.nom_entreprise }}</h2>
<div class="mb-4">
    <a href="{% url 'creation_service' entreprise.id %}" class="btn btn-primary">Créer un nouveau service</a>
</div>
{% if services %}
    <div class="space-y-4">
        {% for service in services %}
            <div class="p-4 bg-base-100 rounded-lg">
                <div class="flex flex-col sm:flex-row sm:justify-between items-center gap-4">
                    <div>
                        <p class="font-bold text-lg break-words">{{ service.nom_service }}</p>
                        <p class="text-sm text-gray-500 break-words">Numéro: {{ service.numero_service }}</p>
                        <p class="text-sm text-gray-500 break-words">Email: {{ service.email_service }}</p>
                        <p class="text-sm text-gray-500 break-words">Budget annuel: {{ service.budget_annuel }}</p>
                        <p class="text-sm text-gray-500 break-words">Objectifs service: {{ service.objectifs_service }}</p>
                    </div>
                    <div class="flex flex-col sm:flex-row gap-2">
                        <a href="{% url 'modifier_service' entreprise.id service.id %}" class="btn btn-primary btn-sm">Modifier</a>
                        <a href="{% url 'supprimer_service' entreprise.id service.id %}" class="btn btn-primary btn-soft btn-sm">Supprimer</a>
                    </div>
                </div>
                {% if service.employes.all %}
                    <div class="pl-8 pt-4 mt-4 border-t border-base-300">
                        <h4 class="font-bold">Employés de ce service:</h4>
                        <ul class="list-disc pl-5 mt-2">
                            {% for employe in service.employes.all %}
                                <li>{{ employe.nom }} {{ employe.prenom }} - {{ employe.poste }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                {% endif %}
            </div>
        {% endfor %}
    </div>
{% else %}
    <p>Aucun service trouvé pour cette entreprise.</p>
{% endif %}
{% else %}
<div class="text-center">
    <p>Aucun service trouvé, veuillez d'abord créer une entreprise.</p>
    <a href="{% url 'creation_entreprise' %}" class="text-green-500">Créer une entreprise</a>
</div>
{% endif %}
{% endblock %}